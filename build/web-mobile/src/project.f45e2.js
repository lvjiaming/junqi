window.__require=function e(t,c,n){function o(s,r){if(!c[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+s+"'")}}var E=c[s]={exports:{}};t[s][0].call(E.exports,function(e){return o(t[s][1][e]||e)},E,E.exports,e,t,c,n)}return c[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({ChatEventManager:[function(e,t,c){"use strict";cc._RF.push(t,"b9ae6RWGANNOZBGaGZfEOft","ChatEventManager");var n=e("./GameEventManager.js"),o=cc.Class({extends:n,statics:{getInstance:function(){return this.chatEventManager||(this.chatEventManager=new o),this.chatEventManager}},connectServer:function(e,t){cc.log("chatEventManager connect"),this.connect(e,t)},startEvent:function(e,t){switch(cc.log("\u53d1\u9001\u7684\u534f\u8baeid\u4e3a\uff1a"+e),e){case o.Event.EVENT_LOGIN_REQ:case o.Event.EVENT_ENTER_ROOM_REQ:case o.Event.EVENT_LEAVE_ROOM_REQ:case o.Event.EVENT_SEND_MEG_REQ:case o.Event.EVENT_CREATE_ROOM_REQ:this.sendMessage(e,t)}},onMsg:function(e,t){switch(cc.log("\u6536\u5230\u7684\u534f\u8baeid\u4e3a\uff1a"+e),e){case o.Event.EVENT_LOGIN_REP:cc.dd.UserData.setMsgData(t);break;case o.Event.EVENT_ENTER_ROOM_REP:cc.dd.RoomData.enterRoom(t);break;case o.Event.EVENT_LEAVE_ROOM_REP:case o.Event.EVENT_SEND_MEG_REP:this.notifyEvent(e,t);break;case o.Event.EVENT_CREATE_ROOM_REP:cc.dd.RoomData.setMsg(t);break;case o.Event.EVENT_MESSAGE_PUSH:this.notifyEvent(e,t);break;case o.Event.USER_ENTER_ROOM_PUSH:cc.dd.RoomData.otherPlayerEnter(t);break;case o.Event.USER_LEAVE_ROOM_PUSH:cc.dd.RoomData.otherPlayerLeave(t)}}});o.Event={EVENT_LOGIN_REQ:1,EVENT_LOGIN_REP:2,EVENT_ENTER_ROOM_REQ:3,EVENT_ENTER_ROOM_REP:4,EVENT_LEAVE_ROOM_REQ:5,EVENT_LEAVE_ROOM_REP:6,EVENT_SEND_MEG_REQ:7,EVENT_SEND_MEG_REP:8,EVENT_MESSAGE_PUSH:9,EVENT_CREATE_ROOM_REQ:10,EVENT_CREATE_ROOM_REP:11,USER_ENTER_ROOM_PUSH:12,USER_LEAVE_ROOM_PUSH:13},cc._RF.pop()},{"./GameEventManager.js":"GameEventManager"}],CommonCfg:[function(e,t,c){"use strict";cc._RF.push(t,"22a8eYuX8lFbZDcj+7mCzXT","CommonCfg");cc.commonCfg={HALL_HOST:"ws://59.110.221.90:2001",GAME_ID:{GAME_JUNQI:1,GAME2:2,GAME3:3},MSG_CODE:{ERR:1,SUC:2},ROOM_STATE:{WAIT:1,GAME:2,END:3}},cc._RF.pop()},{}],CommonTip:[function(e,t,c){"use strict";cc._RF.push(t,"5f073Ed6FVH6rvWDVFJVk8z","CommonTip"),cc.Class({extends:cc.Component,properties:{note:{default:null,type:cc.Label,tooltip:"\u5185\u5bb9"}},onLoad:function(){var e=this;this.node.time&&this.scheduleOnce(function(){e.node.destroy()},this.node.time)},start:function(){},setNote:function(e){this.note&&(this.note.string=e+"...")}}),cc._RF.pop()},{}],EventManager:[function(e,t,c){"use strict";cc._RF.push(t,"68b5fnNrBtIWJ1/RjvXmV7h","EventManager");var n=cc.Class({ObserverList:null,statics:{getInstance:function(){return this.eventManger||(this.eventManger=new n),this.eventManger}},ctor:function(){this.ObserverList=[]},addObserver:function(e){this.ObserverList.forEach(function(t){if(t===e)return!0}),e?this.ObserverList.push(e):cc.log("target is null"),cc.log("this.ObserverList.length : "+this.ObserverList.length)},removeObserver:function(e){var t=this;this.ObserverList.forEach(function(c,n){c===e&&t.ObserverList.splice(n,1)}),cc.log("this.ObserverList.length : "+this.ObserverList.length)},removeAllObserver:function(){this.ObserverList=[]},notifyEvent:function(e,t){try{this.ObserverList.forEach(function(c,n){c.onEventMessage(e,t)})}catch(e){cc.error("\u629b\u51fa\u5f02\u5e38\uff1a"+e)}}});cc._RF.pop()},{}],GameCfg:[function(e,t,c){"use strict";cc._RF.push(t,"c91fbeEYiJH0IPEiDi7ywoW","GameCfg");cc.lzqGameCfg={SEAT_TYPE:{BING_ZHAN:1,XING_YING:2,QIAN_XIAN:3,DA_BEN_YING:4,SHAN_JIE:5},ITEM_TYPE:{SI_LING:1,JUN_ZHANG:2,SHI_ZHANG:3,LV_ZHANG:4,TUAN_ZHANG:5,YING_ZHANG:6,LIAN_ZHANG:7,PAI_ZHANG:8,GONG_BING:9,ZHAN_DAN:10,DI_LEI:11,JUN_QI:12},CHESS_NAME:["","\u53f8\u4ee4","\u519b\u957f","\u5e08\u957f","\u65c5\u957f","\u56e2\u957f","\u8425\u957f","\u8fde\u957f","\u6392\u957f","\u5de5\u5175","\u70b8\u5f39","\u5730\u96f7","\u519b\u65d7"],MAT_SIZE:{W:650,H:1100},ITEM_SIZE:{W:50,H:20,SPACE_X:140,SPACE_Y:80},ITEM_LIST:{X:5,Y:13},CHESS_MIAN:{BACK:1,FACE:2},CHESS_SUIT:{RED:1,BLACK:2}},cc._RF.pop()},{}],GameControl:[function(e,t,c){"use strict";cc._RF.push(t,"184266p8rNG3Zp5dTaAZBMz","GameControl");var n=cc.Class({statics:{getInstance:function(){return this.gameControl||(this.gameControl=new n),this.gameControl}},_game:null,ctor:function(e){this._game=e},createMap:function(){}});cc.gameControl=n,cc._RF.pop()},{}],GameEventManager:[function(e,t,c){"use strict";cc._RF.push(t,"1ffe6AWgdZIL5peBtHRO0OC","GameEventManager");var n=e("./EventManager");cc.Class({extends:n,gameSocket:null,hostStr:null,_isSelfClose:null,_reconnectCurTime:null,_reconnectMaxTime:null,_reconnectTimes:null,_reconnectTimer:null,_curListen:null,ctor:function(){this.gameSocket=null,this._reconnectCurTime=0,this._reconnectMaxTime=10,this._reconnectTimes=1e3,this._isSelfClose=!1,this._reconnectTimer=null},setListen:function(e){this._curListen=e},removeListen:function(){this._curListen=null},connect:function(e,t){var c=this;this.hostStr=e;var n=this;this.gameSocket=new WebSocket(e),this.gameSocket.onopen=function(){cc.log("websocket has connect"),t&&t instanceof Function&&t()},this.gameSocket.onerror=function(){cc.log("websocket connect error")},this.gameSocket.onclose=function(){cc.log("websocket has close"),c._isSelfClose?cc.log("\u73a9\u5bb6\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\uff0c\u4e0d\u91cd\u8fde"):c.reconnect()},this.gameSocket.onmessage=function(e){e=JSON.parse(e.data),n.onMsg(e.msgId,e.msgData)},this.gameSocket.sendMessage=function(e,t){c.gameSocket.readyState===WebSocket.OPEN?c.gameSocket.send(JSON.stringify({msgId:e,msgData:t})):cc.error("websocket connect error: "+c.gameSocket.readyState)}},reconnect:function(){var e=this;if(this._reconnectCurTime++,this._reconnectCurTime>this._reconnectMaxTime)return cc.log("\u91cd\u8fde\u6b21\u6570\u5df2\u8fbe\u6700\u5927"),cc.comTip.hide(),void(this._curListen&&this._curListen.reconnectFail&&this._curListen.reconnectFail());cc.log("\u6b63\u5728\u8fdb\u884c\u7b2c\u6b21"+this._reconnectCurTime+"\u91cd\u8fde"),cc.comTip.show("\u6b63\u5728\u8fdb\u884c\u7b2c\u6b21"+this._reconnectCurTime+"\u91cd\u8fde\u3002\u3002"),this._reconnectTimer=setTimeout(function(){e.connect(e.hostStr,function(){cc.log("\u5df2\u91cd\u8fde\u3002\u3002\u3002"),cc.comTip.hide(),cc.comTip.show("\u91cd\u8fde\u6210\u529f",2),clearTimeout(e._reconnectTimer),e._reconnectCurTime=0,e._curListen&&e._curListen.reconnectSuc&&e._curListen.reconnectSuc()})},this._reconnectTimes)},sendMessage:function(e,t){null!==t&&void 0!==t||(t=null),this.gameSocket.sendMessage(e,t)},close:function(){this.gameSocket.close(),this._isSelfClose=!0},handleData:function(e){var t=new Uint8Array(e)[0],c=new Uint8Array(e,1,e.byteLength-1);this.onMsg(t,c)}});cc._RF.pop()},{"./EventManager":"EventManager"}],GameMgr:[function(e,t,c){"use strict";cc._RF.push(t,"03277i36W9NKYDK2130shry","GameMgr");var n=cc.Class({statics:{getInstance:function(){return this.gmMgr||(this.gmMgr=new n),this.gmMgr}},curConnect:null,gameServerList:null,updateSererList:function(e){this.gameServerList=e},getServerList:function(){return this.gameServerList||[]},getServerById:function(e){var t=null;return this.getServerList().forEach(function(c){c.gameid==e&&(t=c)}),t},connect:function(e,t){var c=e.gameid,n=e.ip,o=e.port;if(c&&n&&o){var i="ws://"+n+":"+o;switch(this.curConnect=i,c){case cc.commonCfg.GAME_ID.GAME_JUNQI:cc.lzqEventM.connect(i,t)}}else cc.error("cfg is error")},getSceneName:function(e){var t=null;switch(e){case cc.commonCfg.GAME_ID.GAME_JUNQI:t="LzqGameScene"}return t},changeToGameScene:function(e,t,c){var n=this,o=function(){var c=n.getSceneName(e);c&&cc.director.preloadScene(c,function(){switch(cc.comTip.hide(),e){case cc.commonCfg.GAME_ID.GAME_JUNQI:cc.lzq={},cc.lzq.room=new cc.lzqRoom(t)}cc.director.loadScene(c)})};this.curConnect?o():this.connect(this.getServerById(e),function(){o()})}});cc.gameMgr=n.getInstance(),cc._RF.pop()},{}],HallEventManager:[function(e,t,c){"use strict";cc._RF.push(t,"37fcc41RCFN1YDodAl/LruF","HallEventManager");var n=e("../Event/GameEventManager.js"),o=cc.Class({extends:n,statics:{getInstance:function(){return this.hallEventManager||(this.hallEventManager=new o),this.hallEventManager}},connectServer:function(e,t){cc.log("hallEventManager connect"),this.connect(e,t)},startEvent:function(e,t){cc.log("\u53d1\u9001\u7684\u534f\u8baeid\u4e3a\uff1a"+e),this.sendMessage(e,t)},onMsg:function(e,t){cc.log("\u6536\u5230\u7684\u534f\u8baeid\u4e3a\uff1a"+e),this.notifyEvent(e,t)}});o.Event={EVENT_ERR_MSG_REP:0,EVENT_REGISTER_REQ:1,EVENT_REGISTER_REP:2,EVENT_LOGIN_IN_REQ:3,EVENT_LOGIN_IN_REP:4,EVENT_GET_GAME_LIST_REQ:5,EVENT_SEND_GAME_LIST:6,EVENT_ENTER_ROOM_SEQ:7,EVENT_ENTER_ROOM_SEP:8,EVENT_SEND_ROOM_INFO:9,EVENT_SEND_GAME_INFO:10,EVENT_USER_ENTER_ROOM:11,EVENT_USER_ONLINE_CHANGE:12,EVENT_READY_REQ:13,EVENT_SET_USER_STATE:14,EVENT_QUIT_ROOM_REQ:15,EVENT_AGREE_QUIT_ROOM:16,EVENT_USER_QUIT_ROOM:17},cc.hallEvent=o.Event,cc.hallEventM=o.getInstance(),cc._RF.pop()},{"../Event/GameEventManager.js":"GameEventManager"}],HallScene:[function(e,t,c){"use strict";cc._RF.push(t,"86a43WcPV5Bm6OXO3274OJ6","HallScene"),cc.Class({extends:cc.Component,properties:{gameListNode:{default:null,type:cc.Node,tooltip:"\u6e38\u620f\u5217\u8868\u7684\u8282\u70b9"}},onLoad:function(){cc.comTip.init(this.node),cc.hallEventM.addObserver(this)},onDestroy:function(){cc.hallEventM.removeObserver(this)},start:function(){},onGetGameListClick:function(){cc.log("\u83b7\u53d6\u6e38\u620f\u5217\u8868"),cc.hallEventM.startEvent(cc.hallEvent.EVENT_GET_GAME_LIST_REQ)},updateGameList:function(e){var t=this;this.gameListNode&&this.gameListNode.children.forEach(function(e){e.destroy()}),cc.gameMgr.updateSererList(e),e.forEach(function(e){var c=new cc.Node;c.addComponent(cc.Label).string=e.name,c.data=e,c.on("touchstart",function(){cc.log(c.data),cc.comTip.show("\u8fde\u63a5\u6e38\u620f\u670d\u52a1\u5668\u4e2d"),cc.gameMgr.connect(c.data,function(){cc.hallEventM.startEvent(cc.hallEvent.EVENT_ENTER_ROOM_SEQ,{gameid:c.data.gameid,userid:cc.user.getUserId()})})}),t.gameListNode.addChild(c)})},onEventMessage:function(e,t){switch(e){case cc.hallEvent.EVENT_ERR_MSG_REP:cc.comTip.show(t.msg,2);break;case cc.hallEvent.EVENT_SEND_GAME_LIST:cc.log("\u83b7\u53d6\u5230\u6e38\u620f\u5217\u8868",t),this.updateGameList(t);break;case cc.hallEvent.EVENT_ENTER_ROOM_SEP:cc.log("\u8fdb\u5165\u623f\u95f4\u56de\u590d",t);break;case cc.hallEvent.EVENT_SEND_ROOM_INFO:cc.log("\u53d1\u9001\u623f\u95f4\u4fe1\u606f",t),t.serverList&&cc.gameMgr.updateSererList(t.serverList),cc.gameMgr.changeToGameScene(t.gameid,t)}}}),cc._RF.pop()},{}],LoginScene:[function(e,t,c){"use strict";cc._RF.push(t,"673aa08qDRBBphu6gGuZKuj","LoginScene"),cc.Class({extends:cc.Component,properties:{loginNode:{default:null,type:cc.Node,tooltip:"\u767b\u5f55\u8282\u70b9"},registerNode:{default:null,type:cc.Node,tooltip:"\u6ce8\u518c\u8282\u70b9"}},onLoad:function(){var e=this;cc.hallEventM.addObserver(this),cc.comTip.init(),cc.resLoad.loadDirRes("dirRes/Common",function(){cc.comTip.show("\u8fde\u63a5\u670d\u52a1\u5668\u4e2d"),cc.hallEventM.connect(cc.commonCfg.HALL_HOST,function(){cc.log("\u5df2\u8fde\u63a5"),cc.comTip.hide(),e.isShowLogin(!0)})})},onDestroy:function(){cc.hallEventM.removeObserver(this)},start:function(){},isShowLogin:function(e){e?(this.loginNode&&(this.loginNode.active=!0,this.initLogin()),this.registerNode&&(this.registerNode.active=!1)):(this.loginNode&&(this.loginNode.active=!1),this.registerNode&&(this.registerNode.active=!0,this.initRegister()))},initLogin:function(){if(this.loginNode){var e=this.loginNode.getChildByName("name"),t=this.loginNode.getChildByName("password");e&&(e.getComponent(cc.EditBox).string=""),t&&(t.getComponent(cc.EditBox).string="")}},initRegister:function(){if(this.registerNode){var e=this.registerNode.getChildByName("name"),t=this.registerNode.getChildByName("password"),c=this.registerNode.getChildByName("password2");e&&(e.getComponent(cc.EditBox).string=""),t&&(t.getComponent(cc.EditBox).string=""),c&&(c.getComponent(cc.EditBox).string="")}},onLoginClick:function(){cc.log("\u767b\u5f55");var e=this.loginNode.getChildByName("name"),t=this.loginNode.getChildByName("password");e.getComponent(cc.EditBox).string&&t.getComponent(cc.EditBox).string?(cc.comTip.show("\u767b\u5f55\u4e2d\uff01\uff01"),cc.hallEventM.startEvent(cc.hallEvent.EVENT_LOGIN_IN_REQ,{name:e.getComponent(cc.EditBox).string,password:t.getComponent(cc.EditBox).string})):cc.comTip.show("\u4e0d\u80fd\u8f93\u5165\u7a7a\uff01\uff01")},onRegisterClick:function(){cc.log("\u6ce8\u518c");var e=this.registerNode.getChildByName("name"),t=this.registerNode.getChildByName("password"),c=this.registerNode.getChildByName("password2"),n=!1;this.registerNode&&t.getComponent(cc.EditBox).string==c.getComponent(cc.EditBox).string&&(n=!0),n?(cc.comTip.show("\u6b63\u5728\u6ce8\u518c\u4e2d\uff01\uff01"),cc.hallEventM.startEvent(cc.hallEvent.EVENT_REGISTER_REQ,{name:e.getComponent(cc.EditBox).string,password:t.getComponent(cc.EditBox).string})):cc.comTip.show("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4fe1\u606f",2)},onOpenRegisterClick:function(){this.isShowLogin(!1)},onOpenLoginClick:function(){this.isShowLogin(!0)},onEventMessage:function(e,t){switch(e){case cc.hallEvent.EVENT_ERR_MSG_REP:cc.comTip.show(t.msg,2);break;case cc.hallEvent.EVENT_REGISTER_REP:cc.comTip.hide(),cc.comTip.show("\u6ce8\u518c\u6210\u529f",2),this.isShowLogin(!0);break;case cc.hallEvent.EVENT_LOGIN_IN_REP:cc.comTip.hide(),cc.log("\u767b\u5f55\u6210\u529f"),cc.user.init(t),cc.director.loadScene("HallScene.fire")}}}),cc._RF.pop()},{}],LzqDeskClick:[function(e,t,c){"use strict";cc._RF.push(t,"6733bC6JPtFq5CjJ0HsoDn6","LzqDeskClick"),Object.defineProperty(c,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,i=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onReturnClick=function(){cc.hallEventM.startEvent(cc.hallEvent.EVENT_QUIT_ROOM_REQ,{userid:cc.user.getUserId()})},t.prototype.onReadyClick=function(e){e.target.active=!1},t=__decorate([o],t)}(cc.Component));c.default=i,cc._RF.pop()},{}],LzqEventManager:[function(e,t,c){"use strict";cc._RF.push(t,"72c62600hFIlJ1fwQw553jb","LzqEventManager");var n=e("../../../Event/GameEventManager.js"),o=cc.Class({extends:n,statics:{getInstance:function(){return this.lzqEventManager||(this.lzqEventManager=new o),this.lzqEventManager}},connectServer:function(e,t){cc.log("lzqEventManager connect"),this.connect(e,t)},startEvent:function(e,t){cc.log("\u53d1\u9001\u7684\u534f\u8baeid\u4e3a\uff1a"+e),e+=1e3*cc.commonCfg.GAME_ID.GAME_JUNQI,this.sendMessage(e,t)},onMsg:function(e,t){cc.log("\u6536\u5230\u7684\u534f\u8baeid\u4e3a\uff1a"+e),this.notifyEvent(e,t)}});o.EVENT={EVENT_GAME_LAYOUT:1},cc.lzqEvent=o.EVENT,cc.lzqEventM=o.getInstance(),cc._RF.pop()},{"../../../Event/GameEventManager.js":"GameEventManager"}],LzqGameControl:[function(e,t,c){"use strict";cc._RF.push(t,"592d1PSYqJPgZA3o5qyBlSI","LzqGameControl");var n=cc.Class({extends:cc.gameControl,itemList:null,dbyList:null,xyList:null,qxList:null,sjList:null,ctor:function(){this.dbyList=[{x:1,y:0},{x:3,y:0},{x:1,y:12},{x:3,y:12}],this.xyList=[{x:1,y:2},{x:3,y:2},{x:2,y:3},{x:1,y:4},{x:3,y:4},{x:1,y:8},{x:3,y:8},{x:2,y:9},{x:1,y:10},{x:3,y:10}],this.qxList=[{x:0,y:6},{x:2,y:6},{x:4,y:6}],this.sjList=[{x:1,y:6},{x:3,y:6}]},createMap:function(){var e=this;if(this.itemList=[],this._game){this._game.bianJie&&(this._game.bianJie.lineWidth=10,this._game.bianJie.strokeColor=new cc.Color(cc.Color.RED),this._game.bianJie.rect(cc.winSize.width/2-cc.lzqGameCfg.MAT_SIZE.W/2,cc.winSize.height/2-cc.lzqGameCfg.MAT_SIZE.H/2,cc.lzqGameCfg.MAT_SIZE.W,cc.lzqGameCfg.MAT_SIZE.H),this._game.bianJie.stroke());for(var t=0;t<cc.lzqGameCfg.ITEM_LIST.X;t++)for(var c=0;c<cc.lzqGameCfg.ITEM_LIST.Y;c++){var n={},o={};this.itemList[t]||(this.itemList[t]=[]),o.x=-cc.lzqGameCfg.MAT_SIZE.W/2+45+t*cc.lzqGameCfg.ITEM_SIZE.SPACE_X,o.y=-cc.lzqGameCfg.MAT_SIZE.H/2+40+c*cc.lzqGameCfg.ITEM_SIZE.SPACE_Y,6==c&&(o.y=o.y+25),c>6&&(o.y=o.y+50),n.pos=o,n.xiabiao={x:t,y:c},n.type=this.getItemTypeByZuoBiao(t,c),this.itemList[t].push(n)}this.itemList.forEach(function(t){t.forEach(function(t,c){if(t.pos){var n=new cc.Node,o=new cc.Node;o.position=cc.v2(t.pos.x,t.pos.y),o.anchor=cc.v2(.5,.5);var i=o.addComponent(cc.Label);o.color=new cc.Color(cc.Color.RED);var s=n.addComponent(cc.Graphics);switch(s.lineWidth=3,s.strokeColor=new cc.Color(cc.Color.RED),s.fillColor=new cc.Color(cc.Color.WHITE),t.type){case cc.lzqGameCfg.SEAT_TYPE.XING_YING:i.lineHeight=24,i.fontSize=24,i.string="\u884c\n\u8425",s.circle(t.pos.x,t.pos.y,cc.lzqGameCfg.ITEM_SIZE.W/2);break;case cc.lzqGameCfg.SEAT_TYPE.QIAN_XIAN:i.lineHeight=20,i.fontSize=20,i.string="\u524d\n\u7ebf";var r=cc.instantiate(o);r.angle=180,r.x=o.x+12,r.y=r.y-2,n.addChild(r),o.x=o.x-12,s.rect(t.pos.x-cc.lzqGameCfg.ITEM_SIZE.W/2,t.pos.y-cc.lzqGameCfg.ITEM_SIZE.W/2,cc.lzqGameCfg.ITEM_SIZE.W,cc.lzqGameCfg.ITEM_SIZE.W);break;case cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE:i.lineHeight=30,i.fontSize=30,i.string="\u5c71\n\u754c",o.angle=90,s.circle(t.pos.x,t.pos.y,cc.lzqGameCfg.ITEM_SIZE.W/2+10);break;case cc.lzqGameCfg.SEAT_TYPE.DA_BEN_YING:i.fontSize=20,i.lineHeight=20,i.string="\u5927\u672c\u8425",o.color=new cc.Color(cc.Color.WHITE),s.fillColor=new cc.Color(cc.Color.RED),s.rect(t.pos.x-cc.lzqGameCfg.ITEM_SIZE.W/2-5,t.pos.y-cc.lzqGameCfg.ITEM_SIZE.H/2-5,cc.lzqGameCfg.ITEM_SIZE.W+10,cc.lzqGameCfg.ITEM_SIZE.H+10);break;default:i.fontSize=18,i.lineHeight=18,i.string="\u5175\u7ad9",s.rect(t.pos.x-cc.lzqGameCfg.ITEM_SIZE.W/2,t.pos.y-cc.lzqGameCfg.ITEM_SIZE.H/2,cc.lzqGameCfg.ITEM_SIZE.W,cc.lzqGameCfg.ITEM_SIZE.H)}c>6&&(o.angle=180),s.stroke(),s.fill(),n.addChild(o),e._game.node.addChild(n,10),t.node=n}})}),this.itemList.forEach(function(t,c){if(t.forEach(function(n,o){if(n.type!=cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE){if(o+1<t.length&&t[o+1].type!=cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE){var i=t[o+1];e.checkTwoPointCanConnect(n,i)}if(o-1>=0&&t[o-1].type!=cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE){var s=t[o-1];e.checkTwoPointCanConnect(n,s)}if(c-1>=0&&e.itemList[c-1][o].type!=cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE){var r=e.itemList[c-1][o];e.checkTwoPointCanConnect(n,r)}if(c+1<e.itemList.length&&e.itemList[c+1][o].type!=cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE){var a=e.itemList[c+1][o];e.checkTwoPointCanConnect(n,a)}if(n.type==cc.lzqGameCfg.SEAT_TYPE.XING_YING){var l=e.itemList[c+1][o+1];e.checkTwoPointCanConnect(n,l,function(){var t=new cc.Node,c=t.addComponent(cc.Graphics);c.lineWidth=3,c.strokeColor=new cc.Color(cc.Color.RED),c.moveTo(n.pos.x,n.pos.y),c.lineTo(l.pos.x,l.pos.y),c.stroke(),e._game.node.addChild(t)}),l=e.itemList[c+1][o-1],e.checkTwoPointCanConnect(n,l,function(){var t=new cc.Node,c=t.addComponent(cc.Graphics);c.lineWidth=3,c.strokeColor=new cc.Color(cc.Color.RED),c.moveTo(n.pos.x,n.pos.y),c.lineTo(l.pos.x,l.pos.y),c.stroke(),e._game.node.addChild(t)}),l=e.itemList[c-1][o+1],e.checkTwoPointCanConnect(n,l,function(){var t=new cc.Node,c=t.addComponent(cc.Graphics);c.lineWidth=3,c.strokeColor=new cc.Color(cc.Color.RED),c.moveTo(n.pos.x,n.pos.y),c.lineTo(l.pos.x,l.pos.y),c.stroke(),e._game.node.addChild(t)}),l=e.itemList[c-1][o-1],e.checkTwoPointCanConnect(n,l,function(){var t=new cc.Node,c=t.addComponent(cc.Graphics);c.lineWidth=3,c.strokeColor=new cc.Color(cc.Color.RED),c.moveTo(n.pos.x,n.pos.y),c.lineTo(l.pos.x,l.pos.y),c.stroke(),e._game.node.addChild(t)})}}if(0==c)if(1==o||5==o||7==o||11==o){var E=new cc.Node,h=E.addComponent(cc.Graphics);h.strokeColor=new cc.Color(cc.Color.BLACK),h.lineWidth=5,h.moveTo(e.itemList[0][o].pos.x,e.itemList[0][o].pos.y),h.lineTo(e.itemList[e.itemList.length-1][o].pos.x,e.itemList[e.itemList.length-1][o].pos.y),h.stroke(),e._game.node.addChild(E)}else if(6!=o){var _=new cc.Node,g=_.addComponent(cc.Graphics);g.strokeColor=new cc.Color(cc.Color.RED),g.lineWidth=3,g.moveTo(e.itemList[0][o].pos.x,e.itemList[0][o].pos.y),g.lineTo(e.itemList[e.itemList.length-1][o].pos.x,e.itemList[e.itemList.length-1][o].pos.y),g.stroke(),e._game.node.addChild(_)}}),0==c||c==e.itemList.length-1){var n=new cc.Node,o=n.addComponent(cc.Graphics);o.strokeColor=new cc.Color(cc.Color.RED),o.lineWidth=3,o.moveTo(t[0].pos.x,t[0].pos.y),o.lineTo(t[t.length-1].pos.x,t[t.length-1].pos.y),o.stroke(),o.lineWidth=5,o.strokeColor=new cc.Color(cc.Color.BLACK),o.moveTo(t[1].pos.x,t[1].pos.y),o.lineTo(t[t.length-2].pos.x,t[t.length-2].pos.y),o.stroke(),e._game.node.addChild(n)}else{var i=new cc.Node,s=i.addComponent(cc.Graphics);s.strokeColor=new cc.Color(cc.Color.RED),s.lineWidth=3,s.moveTo(t[0].pos.x,t[0].pos.y),s.lineTo(t[5].pos.x,t[5].pos.y),s.stroke(),s.lineWidth=3,s.strokeColor=new cc.Color(cc.Color.RED),s.moveTo(t[7].pos.x,t[7].pos.y),s.lineTo(t[t.length-1].pos.x,t[t.length-1].pos.y),s.stroke(),2==c&&(s.lineWidth=5,s.strokeColor=new cc.Color(cc.Color.BLACK),s.moveTo(t[5].pos.x,t[5].pos.y),s.lineTo(t[7].pos.x,t[7].pos.y),s.stroke()),e._game.node.addChild(i)}})}else cc.error("this._game not init")},getItemTypeByZuoBiao:function(e,t){return this.checkIsDby(e,t)?cc.lzqGameCfg.SEAT_TYPE.DA_BEN_YING:this.checkIsXy(e,t)?cc.lzqGameCfg.SEAT_TYPE.XING_YING:this.checkIsQx(e,t)?cc.lzqGameCfg.SEAT_TYPE.QIAN_XIAN:this.checkIsSj(e,t)?cc.lzqGameCfg.SEAT_TYPE.SHAN_JIE:cc.lzqGameCfg.SEAT_TYPE.BING_ZHAN},checkIsDby:function(e,t){for(var c=!1,n=0;n<this.dbyList.length;n++)if(this.dbyList[n].x==e&&this.dbyList[n].y==t){c=!0;break}return c},checkIsXy:function(e,t){for(var c=!1,n=0;n<this.xyList.length;n++)if(this.xyList[n].x==e&&this.xyList[n].y==t){c=!0;break}return c},checkIsQx:function(e,t){for(var c=!1,n=0;n<this.qxList.length;n++)if(this.qxList[n].x==e&&this.qxList[n].y==t){c=!0;break}return c},checkIsSj:function(e,t){for(var c=!1,n=0;n<this.sjList.length;n++)if(this.sjList[n].x==e&&this.sjList[n].y==t){c=!0;break}return c},checkPointInList:function(e,t){var c=!1;return t.forEach(function(t){t.x==e.x&&t.y==e.y&&(c=!0)}),c},checkTwoPointCanConnect:function(e,t,c){e.pointList||(e.pointList=[]),t.pointList||(t.pointList=[]);var n=!1;this.checkPointInList(t.xiabiao,e.pointList)||(e.pointList.push(t.xiabiao),n=!0),this.checkPointInList(e.xiabiao,t.pointList)||(t.pointList.push(e.xiabiao),n=!0),n&&c&&c instanceof Function&&c()},createChessBack:function(){var e=this;this.itemList.forEach(function(t){t.forEach(function(t){if(t.type==cc.lzqGameCfg.SEAT_TYPE.DA_BEN_YING||t.type==cc.lzqGameCfg.SEAT_TYPE.BING_ZHAN){var c=e.createOneChess(cc.lzqGameCfg.CHESS_MIAN.BACK);c.position=cc.v2(t.pos.x,t.pos.y),c.info=t,e._game.node.addChild(c,10)}})})},createOneChess:function(e,t,c){var n=new cc.Node,o=n.addComponent(cc.Graphics);if(e==cc.lzqGameCfg.CHESS_MIAN.BACK)o.rect(-30,-15,60,30),o.stroke(),o.fillColor=new cc.Color(cc.Color.BLACK),o.fill();else{o.lineWidth=10,o.strokeColor=new cc.Color(cc.Color.BLACK),o.rect(-30,-15,60,30),o.stroke(),o.fillColor=new cc.Color(cc.Color.WHITE),o.fill();var i=new cc.Node,s=i.addComponent(cc.Label);s.fontSize=18,s.lineHeight=18,t==cc.lzqGameCfg.CHESS_SUIT.RED?i.color=new cc.Color(cc.Color.RED):i.color=new cc.Color(cc.Color.BLACK),s.string=cc.lzqGameCfg.CHESS_NAME[c],n.addChild(i)}return n},getGameLayout:function(){var e=[];return this.itemList.forEach(function(t){var c=[];t.forEach(function(e){var t={};t.xiabiao=e.xiabiao,t.pointList=e.pointList,t.type=e.type,c.push(t)}),e.push(c)}),e}});cc.lzq_gameControl=n,cc._RF.pop()},{}],LzqGameEvent:[function(e,t,c){"use strict";cc._RF.push(t,"d7ab7yuWY1GcpveCfMo4J5O","LzqGameEvent"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.comTip.init(this.node),cc.hallEventM.addObserver(this),cc.lzqEventM.addObserver(this),cc.lzqEventM.setListen(this)},onDestroy:function(){cc.hallEventM.removeObserver(this),cc.lzqEventM.removeObserver(this),cc.lzqEventM.removeListen()},start:function(){},reconnectFail:function(){cc.director.loadScene("HallScene")},reconnectSuc:function(){},onEventMessage:function(e,t){switch(e){case cc.hallEvent.EVENT_SEND_ROOM_INFO:cc.log("\u623f\u95f4\u4fe1\u606f\uff1a",t);break;case cc.hallEvent.EVENT_SEND_GAME_INFO:break;case cc.hallEvent.EVENT_USER_ENTER_ROOM:cc.log("\u6709\u73a9\u5bb6\u52a0\u5165\uff1a",t),cc.lzq.room.addUser(t.userInfo);break;case cc.hallEvent.EVENT_AGREE_QUIT_ROOM:cc.log("\u540c\u610f\u9000\u51fa\u623f\u95f4"),cc.lzqEventM.close(),cc.director.loadScene("HallScene.fire");break;case cc.hallEvent.EVENT_USER_QUIT_ROOM:cc.log("\u73a9\u5bb6\u9000\u51fa\u623f\u95f4: ",t)}}}),cc._RF.pop()},{}],LzqGameScene:[function(e,t,c){"use strict";cc._RF.push(t,"6dc897ri4hHlaiJWqLiELwB","LzqGameScene");var n=1e4;cc.Class({extends:cc.Component,properties:{bianJie:{default:null,type:cc.Graphics,tooltip:"\u8fb9\u754c\u7684\u7ed8\u56fe"},readyBtn:{default:null,type:cc.Node,tooltip:"\u51c6\u5907\u7684\u6309\u94ae"}},onLoad:function(){cc.lzq.gameControl=new cc.lzq_gameControl(this),cc.lzq.gameControl.createMap(),this.readyBtn&&(this.readyBtn.zIndex=n)},start:function(){}}),cc._RF.pop()},{}],LzqRoom:[function(e,t,c){"use strict";cc._RF.push(t,"f8b9cPA1ClNb4uv8Mtw3tKn","LzqRoom");var n=cc.Class({extends:cc.room});cc.lzqRoom=n,cc._RF.pop()},{}],ResLoad:[function(e,t,c){"use strict";cc._RF.push(t,"8d6c2nOrHdFuqZDEq3h6+FV","ResLoad"),cc.resLoad={},cc.resLoad.dirResList={},cc.resLoad.loadDirRes=function(e,t){cc.loader.loadResDir(e,function(c,n){if(c)cc.error("error: "+c);else{var o=e.split("/");for(var i in cc.resLoad.dirResList[o[o.length-1]]||(cc.resLoad.dirResList[o[o.length-1]]={}),n)n[i]instanceof cc.Prefab?cc.resLoad.dirResList[o[o.length-1]][n[i].name.toUpperCase()]=n[i]:n[i]instanceof cc.SpriteAtlas&&(xx.sys.objectToArray(n[i]._spriteFrames).forEach(function(e){e._texture.notRelease=!0}),cc.resLoad.dirResList[o[o.length-1]][n[i].name.toUpperCase().split(".")[0]]=n[i]);t&&t()}})},cc.resLoad.releaseDirRes=function(e){var t=e.split("/");cc.loader.releaseResDir(e),cc.resLoad.dirResList[t[t.length-1]]={}},cc._RF.pop()},{}],Room:[function(e,t,c){"use strict";cc._RF.push(t,"f735d1+j/RPuqRB0Wubl2d2","Room");var n=cc.Class({_userList:null,_roomCfg:null,ctor:function(e){this.setUserList(e.userlist),this.setRoomCfg(e.roomCfg)},setUserList:function(e){this._userList=e},addUser:function(e){this._userList.push(e)},removeUser:function(e){var t=this;this._userList.forEach(function(c,n){c.id==e&&t._userList.splice(n,1)})},getUserList:function(){return this._userList},setRoomCfg:function(e){this._roomCfg=e},getRoomCfg:function(){return this._roomCfg}});cc.room=n,cc._RF.pop()},{}],TipMgr:[function(e,t,c){"use strict";cc._RF.push(t,"e330dis7TJMWqiQBnNx2Nkz","TipMgr");var n=cc.Class({statics:{getInstance:function(){return this.tipMgr||(this.tipMgr=new n),this.tipMgr}},_curPNode:null,_popZIndex:null,ctor:function(){this._popZIndex=1e4},init:function(e){this._curPNode=e},show:function(e,t){this._curPNode||(this._curPNode=cc.find("Canvas")),this._curPNode.getChildByName("CommonTip")&&this._curPNode.getChildByName("CommonTip").destroy();try{var c=cc.instantiate(cc.resLoad.dirResList.Common.COMMONTIP);c.time=t,c.getComponent("CommonTip").setNote(e),this._curPNode.addChild(c,this._popZIndex)}catch(e){cc.error(e)}},hide:function(){this._curPNode.getChildByName("CommonTip")&&this._curPNode.getChildByName("CommonTip").destroy()}});cc.comTip=n.getInstance(),cc._RF.pop()},{}],User:[function(e,t,c){"use strict";cc._RF.push(t,"820d6t3VXtIxJUNg2XZHEL3","User");var n=cc.Class({statics:{getInstance:function(){return this.user||(this.user=new n),this.user}},_userId:null,_name:null,ctor:function(){this._userId=null,this._name=null},init:function(e){this.setUserId(e.id),this.setName(e.name)},setUserId:function(e){this._userId=e},getUserId:function(){return parseInt(this._userId)},setName:function(e){this._name=e},getName:function(){return this._name}});cc.user=n.getInstance(),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(e,t,c){"use strict";cc._RF.push(t,"3a79aIchj1JLIPTTfRGLgaG","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["CommonCfg","CommonTip","GameControl","ResLoad","Room","TipMgr","User","ChatEventManager","EventManager","GameEventManager","GameMgr","GameCfg","LzqRoom","LzqEventManager","LzqDeskClick","LzqGameControl","LzqGameEvent","LzqGameScene","HallEventManager","HallScene","LoginScene","use_v2.1.x_cc.Action"]);